# weibo_appium_spider
微博appium模拟用户登录和注销

## 功能简介：
### 1. 采用appium + 安卓模拟器对微博用户进行批量登录操作
### 2. 采用mitmproxy进行中间代理，利用python脚本匹配出用户相关信息链接请求，并且进行解析json保存到mongodb
### 3. 采用超级鹰打码平台，对登录验证码进行打码

## 模块功能：
### 1.app_conner.py（appium操作类）：
通过设定安卓系统版本和app软件入口等信息，生成appium操作对象，该对象有上下滑动，左右滑动的方法。


### 2.chaojiying.py(超级鹰打码平台客户端类)：
通过设定超级鹰平台的用户名，密码和软件id，生成超级鹰平台客户端对象。对象包括请求验证码和反馈错误验证题目的方法。

### 3.db_conn.py（mongodb数据库客户端类):
mongodb数据库客户端对象，具备查询，新增，删除微博登录信息的三种方法。

### 4.loggers.py（日志记录类):
设定日志名和日志路径，生成日志对象，包括info,error,debug,warning四种告警级别的日志写入方法

### 5.proxy_script.py(mitmproxy代理监听脚本)：
监听特定url请求，将该请求的参数或者响应内容进行解析，并且存入数据库。该脚本需要在命令行下使用命令：mitmdump -s proxy_script.py -p xxx（端口）进行启动运行。

### 6.weibo_appium_pro.py（微博app操作类）：
本模块为核心模块，模拟用户对微博app进行用户登录批量循环操作，该对象包括登录，验证码验证，转发，注销四个操作，run方法为整个流程集成。

##环境说明：
1.模拟器采用夜神模拟器，并且设置代理为mitmproxy的端口号。具体方法参见网上资料
